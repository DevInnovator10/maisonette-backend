<% admin_layout "full-width" %>

<% admin_breadcrumb(t('spree.admin.tab.salsify')) %>
<% admin_breadcrumb(t('spree.admin.tab.salsify_data_import_row')) %>

<% content_for :page_actions do %>

  <% if @import_row.state.inquiry.failed? && @import_row.salsify_import.import_type == 'products' %>
    <%= button_to(I18n.t('spree.admin.salsify.re_process'),
                  re_process_admin_salsify_import_import_row_path(import_id: @import_row.import.id, id: @import_row.id),
                  method: :put,
                  class:  'btn btn-primary') %>
  <% end %>
<% end %>

<dl>
  <dt>&nbsp;</dt>
  <dd><%= link_to 'Data import', admin_salsify_import_path(@import_row.salsify_import.id), class: 'icon_link', 'data-action': 'view' %></dd>
  <dt><%= t('spree.id') %></dt>
  <dd><%= @import_row.id %></dd>
  <dt><%= t('spree.product') %></dt>
  <dd><%= @import_row.spree_product ? link_to(@import_row.spree_product.name, admin_product_path(@import_row.spree_product_id)) : '-' %></dd>

  <dt><%= t('spree.admin.salsify.unique_key') %></dt>
  <dd><%= @import_row.unique_key %></dd>
  <dt><%= t('spree.admin.salsify.messages') %></dt>
  <dd><%= @import_row.messages %></dd>
  <dt><%= t('spree.created_at') %></dt>
  <dd><%= @import_row.created_at %></dd>
  <dt><%= t('spree.updated_at') %></dt>
  <dd><%= @import_row.updated_at %></dd>
  <dt><%= t('spree.admin.salsify.data') %></dt>
  <dd>&nbsp;</dd>
</dl>

<table>
  <thead>
  <th>Key</th>
  <th>Value</th>
  </thead>
  <tbody>
  <% @import_row_data.each do |k, v| %>
    <tr>
      <td><span class="key"><%= k %></span></td>
      <td><span class="value"><%= v %></span></td>
    </tr>
  <% end %>
  </tbody>
</table>
